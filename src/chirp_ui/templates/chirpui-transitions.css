/* chirp-ui View Transitions — optional polish for htmx swaps
   Include after chirpui.css when using AppConfig(view_transitions=True).

   Names #main so the browser can correlate old/new states (reduces blink).
   Named modal enables intentional shared-element transitions.
   Simple crossfade — override in app CSS if you want slide effects.
   See: https://piccalil.li/blog/why-are-my-view-transitions-blinking/
*/

#main {
    view-transition-name: page-content;
}

/* Modal — typically one at a time; enables intentional transitions */
dialog.chirpui-modal,
.chirpui-modal {
    view-transition-name: chirpui-modal;
}

::view-transition-old(page-content),
::view-transition-old(root) {
    animation: chirpui-vt-fade-out 0.12s ease-out forwards;
}

::view-transition-new(page-content),
::view-transition-new(root) {
    animation: chirpui-vt-fade-in 0.15s ease-out forwards;
}

@keyframes chirpui-vt-fade-out {
    to {
        opacity: 0;
    }
}

@keyframes chirpui-vt-fade-in {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@media (prefers-reduced-motion: reduce) {
    #main {
        view-transition-name: none;
    }

    ::view-transition-old(page-content),
    ::view-transition-old(root),
    ::view-transition-new(page-content),
    ::view-transition-new(root) {
        animation: none;
    }
}
