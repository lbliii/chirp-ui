{% extends "base.html" %}

{% block content %}
{% from "chirpui/layout.html" import container, grid, stack, block %}
{% from "chirpui/forms.html" import text_field, textarea_field, select_field, checkbox_field, toggle_field, radio_field, file_field, date_field, range_field, input_group, multi_select_field, search_field %}

{% call container() %}
{% call stack() %}
<header class="chirpui-stack chirpui-stack--sm">
  <h1>Forms</h1>
  <p class="chirpui-text-muted" style="color: var(--chirpui-text-muted);">
    text_field, textarea_field, select_field, checkbox_field, radio_field, file_field, date_field, range_field, input_group, multi_select_field, search_field — Form inputs with labels and errors.
  </p>
</header>

<h2>Text Fields</h2>
{% call grid(cols=2) %}
{% call block() %}
{{ text_field("name", value="", label="Name", placeholder="Your name", required=true) }}
{% end %}
{% call block() %}
{{ text_field("email", value="", label="Email", type="email", placeholder="you@example.com") }}
{% end %}
{% end %}

<h2>Textarea</h2>
{% call block() %}
{{ textarea_field("bio", value="", label="Bio", rows=4, placeholder="Tell us about yourself...") }}
{% end %}

<h2>Select</h2>
{% call block() %}
{{ select_field("role", options=[{"value": "admin", "label": "Admin"}, {"value": "user", "label": "User"}, {"value": "guest", "label": "Guest"}], selected="user", label="Role") }}
{% end %}

<h2>Checkbox</h2>
{% call block() %}
{{ checkbox_field("newsletter", checked=true, label="Subscribe to newsletter") }}
{% end %}

<h2>Toggle</h2>
{% call block() %}
{{ toggle_field("notifications", checked=true, label="Enable notifications") }}
{{ toggle_field("dark_mode", checked=false, label="Dark mode") }}
<p class="chirpui-text-muted chirpui-font-sm" style="margin-top: 0.5rem;">
  Switch-style checkbox. Use toggle_field for settings UIs.
</p>
{% end %}

<h2>Radio</h2>
{% call block() %}
{{ radio_field("plan", options=[{"value": "free", "label": "Free"}, {"value": "pro", "label": "Pro"}, {"value": "enterprise", "label": "Enterprise"}], selected="pro", label="Plan") }}
{{ radio_field("layout_pref", options=[{"value": "vertical", "label": "Vertical"}, {"value": "horizontal", "label": "Horizontal"}], selected="vertical", label="Layout", layout="horizontal") }}
{% end %}

<h2>File Upload</h2>
{% call block() %}
{{ file_field("avatar", label="Avatar", accept="image/*", hint="PNG, JPG up to 5MB") }}
{% end %}

<h2>Date</h2>
{% call block() %}
{{ date_field("birthday", value="1990-01-15", label="Birthday") }}
{% end %}

<h2>Range</h2>
{% call block() %}
{{ range_field("volume", value=75, min=0, max=100, label="Volume", show_value=true) }}
{% end %}

<h2>Input Group</h2>
{% call block() %}
{{ input_group("price", prefix="$", suffix=".00", value="0", label="Price") }}
{{ input_group("username", prefix="@", placeholder="jane", label="Username") }}
{% end %}

<h2>Multi-Select</h2>
{% call block() %}
{{ multi_select_field("tags", options=[{"value": "python", "label": "Python"}, {"value": "js", "label": "JavaScript"}, {"value": "rust", "label": "Rust"}], selected=["python", "rust"], label="Tags", size=3) }}
{% end %}

<h2>Search</h2>
{% call block() %}
{{ search_field("q", placeholder="Search...") }}
<p class="chirpui-text-muted chirpui-font-sm" style="margin-top: 0.5rem;">
  With search_url and search_target, adds htmx debounced search (keyup delay:300ms).
</p>
{% end %}

<h2>With Errors (demo)</h2>
{% call block() %}
{{ text_field("username", value="ab", label="Username", errors={"username": ["Too short", "Required"]}, required=true) }}
{% end %}

<h2>Live validation</h2>
{% call block() %}
<form hx-post="/forms/demo"
      hx-target="#form_body"
      hx-swap="innerHTML transition:true"
      class="chirpui-stack chirpui-stack--sm">
  <div id="form_body" class="chirpui-stack chirpui-stack--sm">
    {{ text_field("name", value="", label="Name", placeholder="Your name", required=true) }}
    {{ text_field("email", value="", label="Email", type="email", placeholder="you@example.com", required=true) }}
  </div>
  <button type="submit" class="chirpui-btn chirpui-btn--primary">Submit</button>
</form>
<p class="chirpui-text-muted chirpui-font-sm">
  Server-side validation: required fields, email format. On error: ValidationError fragment. On success: FormAction + toast.
</p>
{% end %}

<p><a href="/">← Back to index</a></p>
{% end %}
{% end %}
{% end %}
