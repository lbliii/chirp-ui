{% extends "base.html" %}

{% block content %}
{% from "chirpui/layout.html" import container, grid, stack, block %}
{% from "chirpui/forms.html" import text_field, textarea_field, select_field, checkbox_field, toggle_field %}

{% call container() %}
{% call stack() %}
<header class="chirpui-stack chirpui-stack--sm">
  <h1>Forms</h1>
  <p class="chirpui-text-muted" style="color: var(--chirpui-text-muted);">
    text_field, textarea_field, select_field, checkbox_field — Form inputs with labels and errors.
  </p>
</header>

<h2>Text Fields</h2>
{% call grid(cols=2) %}
{% call block() %}
{{ text_field("name", value="", label="Name", placeholder="Your name", required=true) }}
{% end %}
{% call block() %}
{{ text_field("email", value="", label="Email", type="email", placeholder="you@example.com") }}
{% end %}
{% end %}

<h2>Textarea</h2>
{% call block() %}
{{ textarea_field("bio", value="", label="Bio", rows=4, placeholder="Tell us about yourself...") }}
{% end %}

<h2>Select</h2>
{% call block() %}
{{ select_field("role", options=[{"value": "admin", "label": "Admin"}, {"value": "user", "label": "User"}, {"value": "guest", "label": "Guest"}], selected="user", label="Role") }}
{% end %}

<h2>Checkbox</h2>
{% call block() %}
{{ checkbox_field("newsletter", checked=true, label="Subscribe to newsletter") }}
{% end %}

<h2>Toggle</h2>
{% call block() %}
{{ toggle_field("notifications", checked=true, label="Enable notifications") }}
{{ toggle_field("dark_mode", checked=false, label="Dark mode") }}
<p class="chirpui-text-muted chirpui-font-sm" style="margin-top: 0.5rem;">
  Switch-style checkbox. Use toggle_field for settings UIs.
</p>
{% end %}

<h2>With Errors (demo)</h2>
{% call block() %}
{{ text_field("username", value="ab", label="Username", errors={"username": ["Too short", "Required"]}, required=true) }}
{% end %}

<h2>Live validation</h2>
{% call block() %}
<form hx-post="/forms/demo"
      hx-target="#form_body"
      hx-swap="innerHTML transition:true"
      class="chirpui-stack chirpui-stack--sm">
  <div id="form_body" class="chirpui-stack chirpui-stack--sm">
    {{ text_field("name", value="", label="Name", placeholder="Your name", required=true) }}
    {{ text_field("email", value="", label="Email", type="email", placeholder="you@example.com", required=true) }}
  </div>
  <button type="submit" class="chirpui-btn chirpui-btn--primary">Submit</button>
</form>
<p class="chirpui-text-muted chirpui-font-sm">
  Server-side validation: required fields, email format. On error: ValidationError fragment. On success: FormAction + toast.
</p>
{% end %}

<p><a href="/">← Back to index</a></p>
{% end %}
{% end %}
{% end %}
